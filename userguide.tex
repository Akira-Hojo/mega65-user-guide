% arara: makeindex

% Template for IEEE papers
%% bare_conf.tex
%% V1.4b
%% 2015/08/26
%% by Michael Shell
%% See:
%% http://www.michaelshell.org/
%% for current contact information.
%%
%% This is a skeleton file demonstrating the use of IEEEtran.cls
%% (requires IEEEtran.cls version 1.8b or later) with an IEEE
%% conference paper.
%%
%% Support sites:
%% http://www.michaelshell.org/tex/ieeetran/
%% http://www.ctan.org/pkg/ieeetran
%% and
%% http://www.ieee.org/

%%*************************************************************************
%% Legal Notice:
%% This code is offered as-is without any warranty either expressed or
%% implied; without even the implied warranty of MERCHANTABILITY or
%% FITNESS FOR A PARTICULAR PURPOSE! 
%% User assumes all risk.
%% In no event shall the IEEE or any contributor to this code be liable for
%% any damages or losses, including, but not limited to, incidental,
%% consequential, or any other damages, resulting from the use or misuse
%% of any information contained here.
%%
%% All comments are the opinions of their respective authors and are not
%% necessarily endorsed by the IEEE.
%%
%% This work is distributed under the LaTeX Project Public License (LPPL)
%% ( http://www.latex-project.org/ ) version 1.3, and may be freely used,
%% distributed and modified. A copy of the LPPL, version 1.3, is included
%% in the base LaTeX documentation of all distributions of LaTeX released
%% 2003/12/01 or later.
%% Retain all contribution notices and credits.
%% ** Modified files should be clearly indicated as such, including  **
%% ** renaming them and changing author support contact information. **
%%*************************************************************************


% *** Authors should verify (and, if needed, correct) their LaTeX system  ***
% *** with the testflow diagnostic prior to trusting their LaTeX platform ***
% *** with production work. The IEEE's font choices and paper sizes can   ***
% *** trigger bugs that do not appear when using other class files.       ***                          ***
% The testflow support page is at:
% http://www.michaelshell.org/tex/testflow/

\documentclass[twoside]{book}
% \def\nolinkurl{\url}
%\usepackage{nohyperref}
% \def\UrlBreaks{\do\/\do-}
\usepackage[obeyspaces,spaces]{url}
\usepackage{arydshln}
\usepackage{booktabs}
\usepackage{hyperref}
\usepackage{afterpage}
\usepackage{xcolor}
%\usepackage{breakurl}
\usepackage{flushend}
\usepackage[toc,page]{appendix}
\usepackage{parskip}
\usepackage{graphicx}
\usepackage{tikzpagenodes}
\usepackage{imakeidx}
\usepackage{titlesec}
\usepackage{aeb-minitoc}
\usepackage{fix-cm}

% Don't number sections
\setcounter{secnumdepth}{0}

\renewcommand{\indexname}{INDEX}
\renewcommand{\appendixtocname}{APPENDICES}
\renewcommand{\appendixpagename}{APPENDICES}
\renewcommand{\appendixpage}{%
  \clearpage\thispagestyle{empty}
    \pagecolor{blue}
     \begin{center}
       {
         \large
         % Put a nice amount of vertical space before the title
         \vspace*{2cm}
               {\large\Huge\textcolor{white}{\bf{APPENDICES}}}\\
             \vspace{\fill}
       }
     \end{center}
     \newpage\pagecolor{white}\clearpage
}

\makeatletter\chardef\pdf@shellescape=\@ne\makeatother

\setcounter{tocdepth}{5}

%\TOPLevel{chapter}
%\BTMLevel{section}
\begin{minitocfmt}{\bluemtoc}
\declaretocfmt{section*}{\@F{\Large\bfseries\hspace{5cm}\color{white}\textbullet\hspace{1em}}\@B{1.5em}\@P{\mtocgobble}}
\declaretocfmt{section}{\@F{\Large\bfseries\hspace{5cm}\color{white}\textbullet\hspace{1em}}\@B{1.5em}\@P{\mtocgobble}}
\end{minitocfmt}

\makeatletter
\def\cleardoublepage{\clearpage\if@twoside
\ifodd\c@page
\else\hbox{}\thispagestyle{empty}\newpage
\if@twocolumn\hbox{}\newpage\fi\fi\fi}

\renewcommand*{\l@section}[1]{%
  \@dottedtocline{1}{1.0em}{1em}{%
    \numberline{\textbullet}%
    % \numberline{$\cdot$}%
    \gobble@numberline
    #1%
  }%
}

\makeatother

\input{fonts}

% For some reason the first page has the wrong margin. Try to fix.
\usepackage[a5paper,bottom=2cm,top=1cm,left=1cm,right=0.5cm, footskip = 1cm]{geometry}

% Some Computer Society conferences also require the compsoc mode option,
% but others use the standard conference format.
%
% If IEEEtran.cls has not been installed into the LaTeX system files,
% manually specify the path to it like:
% \documentclass[conference]{../sty/IEEEtran}

%% \input{setup}

% correct bad hyphenation here
\hyphenation{op-tical net-works semi-conduc-tor}

\makeindex[intoc]

\pagenumbering{none}

\begin{document}

\include{frontcover}
\include{regulatory}

%
% paper title
% Titles are generally capitalized except for words such as a, an, and, as,
% at, but, by, for, in, nor, of, on, or, the, to and up, which are usually
% not capitalized unless they are the first or last word of the title.
% Linebreaks \\ can be used within to get better formatting as desired.
% Do not put math or special symbols in the title.

\cleardoublepage

\pagenumbering{roman}

  \begin{titlepage}
    \pagecolor{blue}
     \begin{center}
       {
         \large
         % Put a nice amount of vertical space before the title
         \vspace*{2cm}
               {\Huge\textcolor{white}{\bf{MEGA65 USER'S GUIDE}}}\\
             \vspace{\fill}
                 {\textcolor{white}{Published by \\ the Museum of Electronic Games and Art (M.E.G.A.) eV., Germany.\\and\\Flinders University, Australia.}}
       }
     \end{center}
   \end{titlepage}

% Then the copyright notice page
  \pagecolor{white}\textcolor{black}
  \vfill
  WORK IN PROGRESS
  
  \index{copyright}Copyright \copyright 2018 by Paul Gardner-Stephen, Flinders University, the Museum of Electronic Games and Art eV., and contributors.

  This user-guide is made available under the GNU Free Documentation License v1.3, or later, if desired. This means that you are free to modify, reproduce
  and redistribute this user guide, subject to certain conditions. The full text of the GNU Free Documentation License v1.3 can be
  found at \url{https://www.gnu.org/licenses/fdl-1.3.en.html}.
             
   \par\today


% As a general rule, do not put math, special symbols or citations
% in the abstract

\pagecolor{white}

\tableofcontents

%% XXX - big numbers are not in bold, because latex gets confused
\newcommand*{\justifyheading}{\raggedleft}
\definecolor{headingblue}{rgb}{0.5,0.5,1}
\titleformat{\section}[display]{}{\thesection}{20pt}{\huge\bf\color{headingblue}\uppercase}[\color{black}]
\titleformat{\chapter}[display]
            {\thispagestyle{empty}\pagecolor{blue}\normalfont\huge\bfseries\justifyheading}
            {\textcolor{white}{\uppercase\chaptertitlename\  {\fontseries{bf}\fontsize{100}{130}\selectfont \thechapter}}}
            {20pt}
            {\Huge\textcolor{white}}[\textcolor{white}{\bluemtoc\insertminitoc}\newpage\newpage\pagecolor{white}\textcolor{black}]
\titlecontents{\chapter}
  
\include{chapter0introduction}

\newpagestyle{onlynumber}{\setfoot[][{\bf\small\thepage}][]{}{}{}}
\pagestyle{onlynumber}
\pagenumbering{arabic}
\include{chapter1setup}
\include{chapter2gettingstarted}
\include{chapter3beginningbasic}
\include{chapter4morebasic}
\include{chapter5graphics}
\include{chapter6sprites}
\include{chapter7sound}
\include{chapter8data}

\begin{appendices}

  \include{appendix-accessories}
  \include{appendix-basic2}
  \include{appendix-basic10}
  \include{appendix-basicabbreviations}
  \include{appendix-screencodes}
  \include{appendix-asciicodes}
  \include{appendix-screenmaps}
  \include{appendix-mathfunctions}
  \include{appendix-pinouts}
  \include{appendix-error-messages}
  \include{appendix-sprite-registers}
  \include{appendix-sound-registers}
\end{appendices}



\bibliographystyle{IEEEtran}
\bibliography{references}

\printindex

\end{document}

