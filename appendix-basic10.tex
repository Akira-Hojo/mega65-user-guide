\chapter{BASIC 10 Command Reference}

\section{Format of Commands, Functions and Operators}

In this appendix each of the commands, functions and other callable elements of
BASIC 10 are described.
Some of these can take one or more arguments, that is, pieces of input that you
can (or sometimes must) provide as part of the command or function call.
Some also require that you use special keywords.
Here is an example of how commands, functions and operators will be described
in this appendix:

{\bf KEY <numeric expression>,<string expression> }

In this case, KEY is what we call a {\bf keyword}. That just means a special word that BASIC
understands.  Keywords are always written in CAPITALS, so that you can easily recognise them.

The {\bf <} and {\bf >} signs mean that whatever is between them must be there for the command, function or operator to work.
In this case, it tells us that we need to have a {\bf numeric expression} in one place, and a {\bf string expression} in another place.
We'll explain what there are a bit more in a few moments.

You might also see square brackets around something, for example, {\bf [,numeric expression]}.
This means that whatever appears between the square brackets is optional, that is, you can include it if you need to, but
that the command, function or operator will work just fine without it.  For example, the \screentext{CIRCLE} command has
an optional numeric argument to indicate if the circle should be filled when being drawn.

The comma, and some other symbols and punctuation marks just represent themselves.
In this case, it means that there must be a comma between the {\bf numeric expression} and the {\bf string expression}.
This is what we call syntax: If you miss something out, or put the wrong thing in the wrong place, it is called a
syntax error, and the computer will tell you if you have a syntax error by giving a \screentext{?SYNTAX ERROR} message.

There is nothing to worry about getting an error from the computer.
Instead, it is just the computer's way of telling you that something isn't quite right, so that you can more easily
find and fix the problem.
Error messages like this can't hurt the computer or damage your program, so there is nothing to worry about.
For example, if we accidentally left the comma out, or replaced it with a full-stop, the computer will respond with
a syntax error, like this:

\begin{screenoutput}
  KEY 8"FISH"

  ?SYNTAX ERROR

  KEY 8."FISH"

  ?SYNTAX ERROR
\end{screenoutput}

It is very common for commands, functions and operators to use one or more {\bf``expression''}.
An expression is just a fancy name for something that has a value.
This could be a string, such as \screentext{"HELLO"}, or a number, like \screentext{23.7}, or it could be a calculation, that might include
one or more functions or operators, such as \screentext{LEN("HELLO") * (3 XOR 7)}.
Generally speaking, expressions can result in either a string or numeric result.
In this case we call the expressions either string expressions or numeric expressions.
For example, \screentext{"HELLO"} is a {\bf string expression}, while \screentext{23.7} is a {\bf numeric expression}.

It is important to use the correct type of expression when writing your programs.
If you accidentally use the wrong type, the computer will give you a \screentext{?TYPE MISMATCH ERROR}, to say that the type
of expression you gave doesn't match what it expected, that is, there is a mismatch between the type of expression
it expected, and the one you gave.  For example, we will get a \screentext{?TYPE MISMATCH ERROR} if we type the following command,
because \screentext{"POTATO"} is a string expression instead of a numeric expression:

\begin{screenoutput}
  KEY "POTATO","SOUP"
\end{screenoutput}

You can try typing this into the computer yourself now, if you like.


\section{Commands}

Commands are statements that you can use directly from the {\bf READY.} prompt, or from within a program, for example:

\begin{screenoutput}
  PRINT \"HELLO\"
  HELLO

  10 PRINT \"HELLO\"
  RUN
  HELLO
\end{screenoutput}

% =======================================
% Start of the BASIC 10 command reference
% =======================================

\titleformat*{\subsection}{\normalfont\huge\bfseries\color{blue}}

% ***
% ABS
% ***

\newpage
\subsection{ABS}
\begin{description}[leftmargin=3cm,style=nextline]
\item [Token:] \$B6
\item [Address:] \$FFFF
\item [Format:] {\bf ABS(x)}
\item [Usage:]  The numeric function {\bf ABS(x)} returns
                the absolute value of the numeric
                argument {\bf x}. \\
               {\bf x} = numeric argument (integer or real expression).
\item [Remarks:] the result is of real type.
\item [Example:] Using {\bf ABS} \\

\begin{screenoutput}
  PRINT ABS(-123)
  123
  PRINT ABS(4.5)
  4.5
  PRINT ABS(-4.5)
  4.5
\end{screenoutput}
\end{description}

% ***
% AND
% ***

\newpage
\subsection{AND}
\begin{description}[leftmargin=3cm,style=nextline]
\item [Token:] \$AF
\item [Address:] \$FFFF
\item [Format:] operand {\bf AND} operand
\item [Usage:]  The boolean {\bf AND} operator performs a bitwise
                logical AND operation on two 16 bit values.
                Integer operands are used as they are.
                Real operands are converted to a signed 16 bit integer.
                Logical operands are converted to 16 bit integer
                using \$FFFF, decimal -1 for TRUE
                and \$0000, decimal 0, for FALSE.

   \begin{verbatim}
      0 AND 0  ->  0
      0 AND 1  ->  0
      1 AND 0  ->  0
      1 AND 1  ->  1
   \end{verbatim}

\item [Remarks:] The result is of integer type.
                 If the result is used in a logical context,
                 the value of 0 is regarded as FALSE,
                 all other, nonzero values are regarded as TRUE.
\item [Example:] Using {\bf AND} \\

\begin{screenoutput}
  PRINT 1 AND 3
  1
  PRINT 15 AND 23
  7
  PRINT 128 AND 64
  0
  PRINT -1 AND -7
  -7
  PRINT 2348734 AND 7

  ?ILLEGAL QUANTITY ERROR
\end{screenoutput}

The AND operator can also be used to test boolean conditions, because the {\bf =}, {\bf <}, {\bf <=}, {\bf <>}, {\bf >=} and {\bf >} inequality operators return a numeric value, as can be seen by printing the result of such an expression:

\begin{screenoutput}
  PRINT \"ABC\"=\"ABC\"
  -1
  PRINT \"ABC\"=\"DEF\"
  0
  PRINT 3 < 9
  -1
\end{screenoutput}

Thus, constructions like the following can be constructed:

\begin{screenoutput}
  PRINT (\"ABC\" < \"FOO\") AND (7 <> 9)
  -1
  PRINT (\"ABC\" = \"FOO\") AND (23 > 8)
  0
\end{screenoutput}
\end{description}

% ******
% APPEND
% ******

\newpage
\subsection{APPEND}
\begin{description}[leftmargin=3cm,style=nextline]
\item [Token:] \$FE \$0E
\item [Address:] \$FFFF
\item [Format:]
  {\bf APPEND\# lfn, filename [,D drive] [,U unit] }
\item [Usage:]
   The append command opens an existing sequential file of type
   SEQ or USR for writing and positions the write pointer
   at the end of the file.

   {\bf lfn} = {\bf l}ogical {\bf f}ile {\bf n}umber \\
   1 <= lfn <= 127: line terminator is CR \\
   128 <= lfn <= 255: line terminator is CR LF

   {\bf filename} is either a quoted string, e.g. {\bf "data"} or
   a string expression in parentheses, e.g. {\bf (FN\$)}.

   {\bf drive}Â = drive \# in dual drive disk units. \\
   The drive \# defaults to 0 and can be omitted on single drive units
   like the 1581, 1571 or 1541 series.

   {\bf unit} = device number on the IEC bus.
   The number is typically in the range 8-11 for disk units.
   If a variable is used, it must be put in parentheses.
   The unit \# defaults to 8.

\item [Remarks:]
   \screentext{APPEND\#} functions similar to the \screentext{DOPEN\#}
   command, except that if the file already
   exists, the existing content of the file will be retained, and any
   \screentext{PRINT\#} commands made to the
   open file will cause the file to grow longer.

\item [Example:] Open file in append mode: \\

\begin{screenoutput}
   APPEND#5,"DATA",U9
   APPEND#130,(\$DD),U(UN%)
   APPEND#3,"USER FILE,U"
   APPEND#2,"DATA BASE"
\end{screenoutput}
\end{description}

% ****
% AUTO
% ****

\newpage
\subsection{AUTO}
\begin{description}[leftmargin=3cm,style=nextline]
\item [Token:] \$DC
\item [Address:] \$FFFF
\item [Format:]
  {\bf AUTO [step]}
\item [Usage:] The AUTO command enables faster typing of BASIC programs.
  After submitting a new program line to the BASIC editor with
  the RETURN key, the AUTO function generates a new BASIC line
  number for the entry of the next line. The new number is
  computed by adding {\bf step} to the current line number.

  {\bf step} = line number increment

  Typing {\bf AUTO} with no argument switches this fuction off.

\item [Example:] \screentext{AUTO 10} - use AUTO with increment 10 \\
                 \screentext{AUTO}  - switch AUTO off
\end{description}

% ******
% BACKUP
% ******

\newpage
\subsection{BACKUP}
\begin{description}[leftmargin=3cm,style=nextline]
\item [Token:] \$F6
\item [Address:] \$FFFF
\item [Format:] {\bf BACKUP D source TO D target [,U unit]}
\item [Usage:] The {\bf BACKUP} command can be used on dual drive
   disk units only (e.g. 4040, 8050, 8250).
   The backup is done by the disk unit internally.

   {\bf source} = drive \# of source disk (0 or 1). \\
   {\bf target} = drive \# of target disk (0 or 1).

\item [Remarks:]  The target disk will be formatted and
                 a identical copy of the source disk will be written. \\
                 This command cannot be used for unit to unit copies.

\item [Example:] \screentext{BACKUP D0 TO D1} - copy disk in drive 0 to
                   drive 1 on unit 8 (default).\\
                 \screentext{BACKUP D1 TO D0, U9} - copy disk in drive 1 to
                   drive 0 on unit 9.\\
\end{description}

% ****
% BANK
% ****

\newpage
\subsection{BANK}
\begin{description}[leftmargin=3cm,style=nextline]
\item [Token:] \$FE \$02
\item [Address:] \$FFFF
\item [Format:] {\bf BANK} banknumber
\item [Usage:] The {\bf BANK} command selects the memory configuration
               for BASIC commands, that use 16 bit addresses.
               These are LOAD, SAVE, PEEK, POKE, WAIT and SYS.
               See system memory map for details.
\item [Remarks:] A value > 127 selects memory mapped I/O.
                 The default value for the bank number is 128.
\item [Example:] \screentext{BANK 1} - select memory configuration 1.
\end{description}

%\newpage
%\subsection{}
%
%\begin{description}[leftmargin=3cm,style=nextline]
%\item [Token:]
%\item [Address:] \$FFFF
%\item [Format:]
%\item [Usage:]
%\item [Remarks:]
%\item [Example:]
%\end{description}


\newpage
\section{Functions}

Functions are different from commands in that they cannot be used on their own.
Instead, a function can only be used in an expression.
There are a variety of functions provided in BASIC 10.
Some can be used only on strings, while others can only be used on numbers.


\subsection{ASC - PETSCII Value Function}

{\bf ASC(<string expression>)}

This function returns the PETSCII value of the first character of the string expression.
If the string expression is blank, it returns 0.  For example:

\begin{screenoutput}
  PRINT ASC(\"FOO\")
  70
  A$=\"MOO\": PRINT ASC(A$)
  77
  PRINT ASC("")
  0
\end{screenoutput}

\subsection{ATN - Arc Tangent Function}

{\bf ATN(<numeric expression>)}

THE \screentext{ATN} function returns the angle (in radians) whose tangent is the value of the numeric expression.
The result will be between $-\pi/2$ and $\pi/2$.
To convert from radians to degrees, multiply the result by $180/\pi$.
Examples of the \screentext{ATN} function:

% PGS 20190309
% XXX BUG - The Pi character (unicode 0x3c0, can be entered in emacs with C-x 8 RET 3c0 RET)
% appears in the wrong place, if it is not preceeded by a space.  I have no idea why this is.
% Worked around by putting white space before the PI character, but this is far from ideal in terms
% of the appearance of the output

\begin{screenoutput}
  X=ATN(500)
  PRINT X
  1.56879633
  PRINT ATN(60)*(180/ Ï)
  89.04515875
\end{screenoutput}

\section{Operators}

Operators are very much like functions, except that instead of having their arguments inside round brackets,
the keyword goes in between the arguments, or in the case of the few operators, like \screentext{NOT}, that take only one argument,
the keyword goes before the argument like in a function, but there are no round brackets.

